{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ted/vivid/frontend/src/components/canvas/CustomNodes.tsx"],"sourcesContent":["\"use client\";\n\nimport { memo } from \"react\";\nimport { Handle, Node, NodeProps, Position } from \"@xyflow/react\";\nimport {\n  Cpu,\n  Database,\n  FileCode,\n  FileInput,\n  FileOutput,\n  Lock,\n  Palette,\n  Settings,\n  Sparkles,\n  Workflow,\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\n// Utility for cleaner classes\nfunction cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport type CanvasNodeKind =\n  | \"input\"\n  | \"style\"\n  | \"customization\"\n  | \"processing\"\n  | \"output\"\n  | \"capsule\";\n\nexport interface CanvasNodeData extends Record<string, unknown> {\n  label: string;\n  subtitle?: string;\n  // Optional: override icon or add explicit status\n  status?: \"idle\" | \"running\" | \"error\" | \"success\";\n  // Capsule node specific\n  capsuleId?: string;\n  capsuleVersion?: string;\n  params?: Record<string, unknown>;\n  locked?: boolean;\n}\n\n// Visual configuration for each node type\nconst NODE_CONFIG: Record<\n  CanvasNodeKind,\n  {\n    icon: React.ElementType;\n    gradient: string;\n    glow: string;\n    text: string;\n    badge: string;\n  }\n> = {\n  input: {\n    icon: FileInput,\n    gradient: \"from-sky-400 to-blue-600\",\n    glow: \"shadow-sky-500/20\",\n    text: \"text-sky-100\",\n    badge: \"bg-sky-500/20 text-sky-200 border-sky-500/30\",\n  },\n  style: {\n    icon: Palette,\n    gradient: \"from-amber-300 to-orange-500\",\n    glow: \"shadow-amber-500/20\",\n    text: \"text-amber-100\",\n    badge: \"bg-amber-500/20 text-amber-200 border-amber-500/30\",\n  },\n  customization: {\n    icon: Settings,\n    gradient: \"from-slate-400 to-zinc-600\",\n    glow: \"shadow-slate-500/20\",\n    text: \"text-slate-100\",\n    badge: \"bg-slate-500/20 text-slate-200 border-slate-500/30\",\n  },\n  processing: {\n    icon: Sparkles,\n    gradient: \"from-fuchsia-400 to-purple-600\",\n    glow: \"shadow-purple-500/30\",\n    text: \"text-purple-100\",\n    badge: \"bg-purple-500/20 text-purple-200 border-purple-500/30\",\n  },\n  output: {\n    icon: FileOutput,\n    gradient: \"from-emerald-400 to-teal-600\",\n    glow: \"shadow-emerald-500/20\",\n    text: \"text-emerald-100\",\n    badge: \"bg-emerald-500/20 text-emerald-200 border-emerald-500/30\",\n  },\n  capsule: {\n    icon: Workflow,\n    gradient: \"from-rose-400 to-pink-600\",\n    glow: \"shadow-rose-500/30\",\n    text: \"text-rose-100\",\n    badge: \"bg-rose-500/20 text-rose-200 border-rose-500/30\",\n  },\n};\n\nfunction BaseNode({ data, type, selected }: NodeProps<Node<CanvasNodeData>>) {\n  const kind = (type as CanvasNodeKind) || \"customization\";\n  const config = NODE_CONFIG[kind];\n  const Icon = config.icon;\n\n  const canReceive = kind !== \"input\";\n  const canSend = kind !== \"output\";\n  const isCapsule = kind === \"capsule\";\n  const isLocked = isCapsule && Boolean(data.locked);\n  const status = data.status ?? \"idle\";\n  const statusLabel =\n    status === \"running\"\n      ? \"RUNNING\"\n      : status === \"success\"\n        ? \"DONE\"\n        : status === \"error\"\n          ? \"ERROR\"\n          : \"ACTIVE\";\n  const statusClass =\n    status === \"running\"\n      ? \"bg-amber-500/20 text-amber-200 border-amber-500/30\"\n      : status === \"success\"\n        ? \"bg-emerald-500/20 text-emerald-200 border-emerald-500/30\"\n        : status === \"error\"\n          ? \"bg-rose-500/20 text-rose-200 border-rose-500/30\"\n          : config.badge;\n\n  return (\n    <motion.div\n      initial={{ scale: 0.9, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      whileHover={{ scale: 1.02, y: -2 }}\n      transition={{ duration: 0.2 }}\n      className={cn(\n        \"relative min-w-[240px] rounded-2xl border bg-slate-950/80 px-4 py-4 backdrop-blur-xl transition-all duration-300\",\n        selected\n          ? `border-transparent ring-2 ring-offset-2 ring-offset-slate-950 ring-${config.gradient.split(\"-\")[1]}-400`\n          : \"border-slate-800\",\n        config.glow,\n        selected && \"shadow-2xl\"\n      )}\n    >\n      {/* Gradient border effect via pseudo-element container if desired, or simple border for MVP */}\n      {selected && (\n        <div\n          className={cn(\n            \"absolute inset-0 -z-10 rounded-2xl opacity-20 bg-gradient-to-br\",\n            config.gradient\n          )}\n        />\n      )}\n\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className={cn(\n              \"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br shadow-inner\",\n              config.gradient\n            )}\n          >\n            <Icon className=\"h-4 w-4 text-white\" strokeWidth={2.5} />\n          </div>\n          <div>\n            <div\n              className={cn(\n                \"text-xs font-bold uppercase tracking-wider opacity-60\",\n                config.text\n              )}\n            >\n              {kind}\n            </div>\n            <div className=\"text-sm font-bold text-slate-100 leading-tight\">\n              {data.label}\n            </div>\n          </div>\n        </div>\n        {isCapsule && (\n          <div className=\"flex items-center gap-1 text-[10px] uppercase tracking-widest\">\n            <span className=\"rounded-full border border-rose-400/30 bg-rose-500/10 px-2 py-0.5 text-rose-200\">\n              Sealed\n            </span>\n            {isLocked && (\n              <span className=\"flex items-center gap-1 rounded-full border border-slate-400/30 bg-slate-500/10 px-2 py-0.5 text-slate-200\">\n                <Lock className=\"h-3 w-3\" />\n                Locked\n              </span>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Body / Content */}\n      {data.subtitle && (\n        <div className=\"mb-2 rounded-md bg-slate-900/50 px-3 py-2 text-xs font-medium text-slate-400\">\n          {data.subtitle}\n        </div>\n      )}\n\n      {/* Status indicator if needed */}\n      <div className=\"flex items-center justify-between mt-2\">\n        <span className={cn(\"px-2 py-0.5 rounded text-[10px] font-medium border\", statusClass)}>\n          {statusLabel}\n        </span>\n        {/* Could add processing spinners here */}\n      </div>\n\n      {/* Handles with improved styling */}\n      {canReceive && (\n        <Handle\n          type=\"target\"\n          position={Position.Left}\n          className={cn(\n            \"!h-4 !w-2 !rounded-full !border-2 !border-slate-950 transition-colors\",\n            \"bg-slate-400 hover:bg-white\"\n          )}\n        />\n      )}\n      {canSend && (\n        <Handle\n          type=\"source\"\n          position={Position.Right}\n          className={cn(\n            \"!h-4 !w-2 !rounded-full !border-2 !border-slate-950 transition-colors\",\n            \"bg-slate-400 hover:bg-white\"\n          )}\n        />\n      )}\n    </motion.div>\n  );\n}\n\nexport const CanvasNode = memo(BaseNode);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///Users/ted/vivid/frontend/src/lib/api.ts"],"sourcesContent":["import type { Edge, Node } from \"@xyflow/react\";\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"\";\n\ninterface ApiError {\n  detail?: string;\n}\n\nexport interface CanvasGraph {\n  nodes: Node[];\n  edges: Edge[];\n}\n\nexport interface Canvas {\n  id: string;\n  title: string;\n  graph_data: CanvasGraph;\n  is_public: boolean;\n  version: number;\n  owner_id?: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CanvasCreate {\n  title: string;\n  graph_data: CanvasGraph;\n  is_public?: boolean;\n}\n\nexport interface Template {\n  id: string;\n  slug: string;\n  title: string;\n  description: string;\n  tags: string[];\n  graph_data: CanvasGraph;\n  is_public: boolean;\n  creator_id?: string | null;\n  preview_video_url?: string;\n}\n\nexport interface CapsuleSpec {\n  id: string;\n  capsule_key: string;\n  version: string;\n  display_name: string;\n  description: string;\n  spec: Record<string, unknown>;\n  is_active: boolean;\n}\n\nexport interface CapsuleRun {\n  run_id: string;\n  status: string;\n  summary: Record<string, unknown>;\n  evidence_refs: string[];\n  version: string;\n  cached?: boolean;\n}\n\nexport interface CapsuleRunHistoryItem {\n  run_id: string;\n  status: string;\n  summary: Record<string, unknown>;\n  evidence_refs: string[];\n  version: string;\n  created_at: string;\n}\n\nexport interface CapsuleRunRequest {\n  canvas_id?: string;\n  node_id?: string;\n  capsule_id: string;\n  capsule_version: string;\n  inputs: Record<string, unknown>;\n  params: Record<string, unknown>;\n}\n\nexport interface ScenePreview {\n  scene_number: number;\n  composition: string;\n  dominant_color: string;\n  accent_color: string;\n  pacing_note: string;\n  duration_hint: string;\n}\n\nexport interface StoryboardPreview {\n  run_id: string;\n  capsule_id: string;\n  scenes: ScenePreview[];\n  palette: string[];\n  style_vector: number[];\n  evidence_refs: string[];\n}\n\nexport interface GenerationRun {\n  id: string;\n  canvas_id: string;\n  spec: Record<string, unknown>;\n  status: string;\n  outputs: Record<string, unknown>;\n  created_at: string;\n  updated_at: string;\n}\n\nclass ApiClient {\n  private async request<T>(endpoint: string, options: RequestInit = {}): Promise<T> {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      ...options,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(options.headers || {}),\n      },\n    });\n\n    if (!response.ok) {\n      const error: ApiError = await response.json().catch(() => ({}));\n      throw new Error(error.detail || \"Request failed\");\n    }\n\n    return response.json();\n  }\n\n  async listCanvases(): Promise<Canvas[]> {\n    return this.request<Canvas[]>(\"/api/v1/canvases/\");\n  }\n\n  async createCanvas(data: CanvasCreate): Promise<Canvas> {\n    return this.request<Canvas>(\"/api/v1/canvases/\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    });\n  }\n\n  async loadCanvas(id: string): Promise<Canvas> {\n    return this.request<Canvas>(`/api/v1/canvases/${id}`);\n  }\n\n  async updateCanvas(id: string, data: Partial<CanvasCreate>): Promise<Canvas> {\n    return this.request<Canvas>(`/api/v1/canvases/${id}`, {\n      method: \"PATCH\",\n      body: JSON.stringify(data),\n    });\n  }\n\n  async listTemplates(): Promise<Template[]> {\n    return this.request<Template[]>(\"/api/v1/templates/\");\n  }\n\n  async getTemplate(id: string): Promise<Template> {\n    return this.request<Template>(`/api/v1/templates/${id}`);\n  }\n\n  async createCanvasFromTemplate(templateId: string, title?: string): Promise<Canvas> {\n    return this.request<Canvas>(\"/api/v1/canvases/from-template\", {\n      method: \"POST\",\n      body: JSON.stringify({ template_id: templateId, title }),\n    });\n  }\n\n  async getCapsuleSpec(capsuleKey: string, version?: string): Promise<CapsuleSpec> {\n    const params = version ? `?version=${encodeURIComponent(version)}` : \"\";\n    return this.request<CapsuleSpec>(`/api/v1/capsules/${capsuleKey}${params}`);\n  }\n\n  async runCapsule(payload: CapsuleRunRequest): Promise<CapsuleRun> {\n    return this.request<CapsuleRun>(\"/api/v1/capsules/run\", {\n      method: \"POST\",\n      body: JSON.stringify(payload),\n    });\n  }\n\n  async listCapsuleRuns(capsuleKey: string, limit: number = 5): Promise<CapsuleRunHistoryItem[]> {\n    return this.request<CapsuleRunHistoryItem[]>(\n      `/api/v1/capsules/${capsuleKey}/runs?limit=${limit}`\n    );\n  }\n\n  async computeSpec(nodes: Node[], edges: Edge[]): Promise<{ spec: Record<string, unknown>; generated: boolean }> {\n    return this.request(\"/api/v1/spec/compute\", {\n      method: \"POST\",\n      body: JSON.stringify({ nodes, edges }),\n    });\n  }\n\n  async optimizeParams(\n    nodes: Node[],\n    edges: Edge[],\n    targetProfile: string = \"balanced\"\n  ): Promise<{\n    recommendations: Array<{\n      params: Record<string, unknown>;\n      fitness_score: number;\n      profile: string;\n    }>;\n  }> {\n    return this.request(\"/api/v1/spec/optimize\", {\n      method: \"POST\",\n      body: JSON.stringify({ nodes, edges, target_profile: targetProfile }),\n    });\n  }\n\n  async getStoryboardPreview(\n    capsuleKey: string,\n    runId: string,\n    sceneCount: number = 3\n  ): Promise<StoryboardPreview> {\n    return this.request<StoryboardPreview>(\n      `/api/v1/capsules/${capsuleKey}/runs/${runId}/preview?scene_count=${sceneCount}`\n    );\n  }\n\n  async createGenerationRun(canvasId: string): Promise<GenerationRun> {\n    return this.request<GenerationRun>(\"/api/v1/runs/\", {\n      method: \"POST\",\n      body: JSON.stringify({ canvas_id: canvasId }),\n    });\n  }\n\n  async getGenerationRun(runId: string): Promise<GenerationRun> {\n    return this.request<GenerationRun>(`/api/v1/runs/${runId}`);\n  }\n}\n\nexport const api = new ApiClient();\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///Users/ted/vivid/frontend/src/components/canvas/Inspector.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { Node } from \"@xyflow/react\";\nimport { CanvasNodeData, CanvasNodeKind } from \"./CustomNodes\";\nimport { api, CapsuleRun, CapsuleRunHistoryItem, CapsuleSpec } from \"@/lib/api\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { X, Trash2, Sliders, Play, Lock } from \"lucide-react\";\n\ninterface InspectorProps {\n  selectedNode: Node<CanvasNodeData> | null;\n  onClose: () => void;\n  onUpdate: (nodeId: string, data: Partial<CanvasNodeData>) => void;\n  onDelete?: (nodeId: string) => void;\n}\n\ntype ParamDef = {\n  type: \"enum\" | \"number\" | \"boolean\" | \"string\";\n  options?: string[];\n  min?: number;\n  max?: number;\n  step?: number;\n  default?: unknown;\n  visibility?: \"public\" | \"admin\";\n};\n\nconst NODE_PARAM_DEFS: Partial<Record<CanvasNodeKind, Record<string, ParamDef>>> = {\n  style: {\n    style_intensity: { type: \"number\", min: 0.4, max: 1.0, step: 0.05, default: 0.6 },\n    color_bias: { type: \"enum\", options: [\"cool\", \"neutral\", \"warm\"], default: \"neutral\" },\n    composition: {\n      type: \"enum\",\n      options: [\"symmetry\", \"rule_of_thirds\", \"centered\", \"leading_lines\"],\n      default: \"rule_of_thirds\",\n    },\n    pacing: { type: \"enum\", options: [\"slow\", \"medium\", \"fast\"], default: \"medium\" },\n  },\n  customization: {\n    tone: {\n      type: \"enum\",\n      options: [\"hopeful\", \"tense\", \"melancholic\", \"playful\"],\n      default: \"hopeful\",\n    },\n    music_mood: {\n      type: \"enum\",\n      options: [\"ambient\", \"orchestral\", \"electronic\", \"acoustic\"],\n      default: \"ambient\",\n    },\n    personal_theme: { type: \"string\", default: \"\" },\n    motif: { type: \"string\", default: \"\" },\n  },\n  processing: {\n    mode: { type: \"enum\", options: [\"auto\", \"ga\", \"rl\"], default: \"auto\" },\n    target_profile: {\n      type: \"enum\",\n      options: [\"balanced\", \"cinematic\", \"experimental\"],\n      default: \"balanced\",\n    },\n    iterations: { type: \"number\", min: 1, max: 50, step: 1, default: 10 },\n    temperature: { type: \"number\", min: 0.1, max: 1.0, step: 0.05, default: 0.7 },\n  },\n};\n\nexport function Inspector({\n  selectedNode,\n  onClose,\n  onUpdate,\n  onDelete,\n}: InspectorProps) {\n  const [capsuleSpec, setCapsuleSpec] = useState<CapsuleSpec | null>(null);\n  const [capsuleError, setCapsuleError] = useState<string | null>(null);\n  const [capsuleLoading, setCapsuleLoading] = useState(false);\n  const [runStatus, setRunStatus] = useState<\n    \"idle\" | \"running\" | \"success\" | \"error\"\n  >(\"idle\");\n  const [runError, setRunError] = useState<string | null>(null);\n  const [runResult, setRunResult] = useState<CapsuleRun | null>(null);\n  const [runHistory, setRunHistory] = useState<CapsuleRunHistoryItem[]>([]);\n  const [runHistoryLoading, setRunHistoryLoading] = useState(false);\n  const [runHistoryError, setRunHistoryError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!selectedNode || selectedNode.type !== \"capsule\" || !selectedNode.data.capsuleId) {\n      setCapsuleSpec(null);\n      setCapsuleError(null);\n      setCapsuleLoading(false);\n      setRunHistory([]);\n      setRunHistoryError(null);\n      setRunHistoryLoading(false);\n      return;\n    }\n\n    let isActive = true;\n    setCapsuleLoading(true);\n    setCapsuleError(null);\n\n    api\n      .getCapsuleSpec(\n        selectedNode.data.capsuleId,\n        selectedNode.data.capsuleVersion\n      )\n      .then((spec) => {\n        if (!isActive) return;\n        setCapsuleSpec(spec);\n      })\n      .catch((err) => {\n        if (!isActive) return;\n        setCapsuleError(err instanceof Error ? err.message : \"Failed to load capsule spec\");\n      })\n      .finally(() => {\n        if (isActive) setCapsuleLoading(false);\n      });\n\n    return () => {\n      isActive = false;\n    };\n  }, [selectedNode]);\n\n  useEffect(() => {\n    setRunStatus(\"idle\");\n    setRunError(null);\n    setRunResult(null);\n  }, [selectedNode?.id]);\n\n  const exposedParams = useMemo(() => {\n    const spec = capsuleSpec?.spec as { exposedParams?: Record<string, ParamDef> } | undefined;\n    return spec?.exposedParams || null;\n  }, [capsuleSpec]);\n\n  const nodeParamDefs = useMemo(() => {\n    if (!selectedNode) return null;\n    if (selectedNode.type === \"capsule\") return exposedParams;\n    return NODE_PARAM_DEFS[selectedNode.type as CanvasNodeKind] || null;\n  }, [selectedNode, exposedParams]);\n\n  useEffect(() => {\n    if (!selectedNode || !nodeParamDefs) return;\n    if (selectedNode.data.params) return;\n\n    const defaults: Record<string, unknown> = {};\n    Object.entries(nodeParamDefs).forEach(([key, def]) => {\n      if (def.default !== undefined) {\n        defaults[key] = def.default;\n        return;\n      }\n      if (def.type === \"number\") {\n        defaults[key] = typeof def.min === \"number\" ? def.min : 0;\n      } else if (def.type === \"enum\") {\n        defaults[key] = def.options?.[0] ?? \"\";\n      } else if (def.type === \"boolean\") {\n        defaults[key] = false;\n      } else {\n        defaults[key] = \"\";\n      }\n    });\n    onUpdate(selectedNode.id, { params: defaults });\n  }, [selectedNode, nodeParamDefs, onUpdate]);\n\n  const params = selectedNode?.data?.params || {};\n  const capsuleVersion =\n    selectedNode?.data?.capsuleVersion || capsuleSpec?.version || \"latest\";\n\n  const renderParamControl = (key: string, def: ParamDef) => {\n    const fallback =\n      def.default ??\n      (def.type === \"number\"\n        ? def.min ?? 0\n        : def.type === \"enum\"\n          ? def.options?.[0] ?? \"\"\n          : def.type === \"boolean\"\n            ? false\n            : \"\");\n    const currentValue = params[key] ?? fallback;\n\n    if (def.type === \"enum\") {\n      return (\n        <select\n          value={String(currentValue)}\n          onChange={(e) =>\n            onUpdate(selectedNode!.id, {\n              params: {\n                ...params,\n                [key]: e.target.value,\n              },\n            })\n          }\n          className=\"w-full rounded border border-white/10 bg-slate-900/50 px-2 py-1.5 text-xs text-slate-100\"\n        >\n          {(def.options || []).map((option) => (\n            <option key={option} value={option}>\n              {option}\n            </option>\n          ))}\n        </select>\n      );\n    }\n\n    if (def.type === \"boolean\") {\n      return (\n        <button\n          onClick={() =>\n            onUpdate(selectedNode!.id, {\n              params: {\n                ...params,\n                [key]: !currentValue,\n              },\n            })\n          }\n          className={`w-full rounded border px-2 py-1.5 text-xs ${\n            currentValue\n              ? \"border-emerald-400/40 bg-emerald-500/10 text-emerald-200\"\n              : \"border-white/10 bg-slate-900/50 text-slate-400\"\n          }`}\n        >\n          {currentValue ? \"Enabled\" : \"Disabled\"}\n        </button>\n      );\n    }\n\n    if (def.type === \"number\") {\n      return (\n        <input\n          type=\"range\"\n          min={def.min ?? 0}\n          max={def.max ?? 1}\n          step={def.step ?? 0.05}\n          value={Number(currentValue)}\n          onChange={(e) =>\n            onUpdate(selectedNode!.id, {\n              params: {\n                ...params,\n                [key]: parseFloat(e.target.value),\n              },\n            })\n          }\n          className=\"w-full accent-rose-400\"\n        />\n      );\n    }\n\n    return (\n      <input\n        type=\"text\"\n        value={String(currentValue)}\n        onChange={(e) =>\n          onUpdate(selectedNode!.id, {\n            params: {\n              ...params,\n              [key]: e.target.value,\n            },\n          })\n        }\n        className=\"w-full rounded border border-white/10 bg-slate-900/50 px-2 py-1.5 text-xs text-slate-100\"\n      />\n    );\n  };\n\n  const refreshRunHistory = useCallback(async (capsuleId: string) => {\n    setRunHistoryLoading(true);\n    setRunHistoryError(null);\n    try {\n      const history = await api.listCapsuleRuns(capsuleId, 5);\n      setRunHistory(history);\n    } catch (err) {\n      setRunHistoryError(err instanceof Error ? err.message : \"Failed to load run history\");\n    } finally {\n      setRunHistoryLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!selectedNode || selectedNode.type !== \"capsule\" || !selectedNode.data.capsuleId) return;\n    refreshRunHistory(selectedNode.data.capsuleId);\n  }, [selectedNode?.id, selectedNode?.data?.capsuleId, refreshRunHistory]);\n\n  const handleRunCapsule = async () => {\n    if (!selectedNode || selectedNode.type !== \"capsule\" || !selectedNode.data.capsuleId) {\n      return;\n    }\n\n    setRunStatus(\"running\");\n    setRunError(null);\n    onUpdate(selectedNode.id, { status: \"running\" });\n\n    if (!selectedNode.data.capsuleVersion && capsuleSpec?.version) {\n      onUpdate(selectedNode.id, { capsuleVersion: capsuleSpec.version });\n    }\n\n    try {\n      const result = await api.runCapsule({\n        capsule_id: selectedNode.data.capsuleId,\n        capsule_version: capsuleVersion,\n        inputs: {},\n        params: params as Record<string, unknown>,\n        node_id: selectedNode.id,\n      });\n      setRunResult(result);\n      setRunStatus(\"success\");\n      onUpdate(selectedNode.id, { status: \"success\" });\n      await refreshRunHistory(selectedNode.data.capsuleId);\n    } catch (err) {\n      setRunError(err instanceof Error ? err.message : \"Capsule run failed\");\n      setRunStatus(\"error\");\n      onUpdate(selectedNode.id, { status: \"error\" });\n    }\n  };\n\n  return (\n    <AnimatePresence>\n      {selectedNode && (\n        <motion.aside\n          initial={{ x: \"100%\", opacity: 0 }}\n          animate={{ x: 0, opacity: 1 }}\n          exit={{ x: \"100%\", opacity: 0 }}\n          transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n          className=\"absolute right-0 top-0 h-full w-80 border-l border-white/10 bg-slate-950/80 p-6 backdrop-blur-2xl shadow-2xl z-20\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-8\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-sky-500/20 text-sky-400\">\n                <Sliders className=\"h-4 w-4\" />\n              </div>\n              <div>\n                <p className=\"text-[10px] font-bold uppercase tracking-widest text-slate-500\">\n                  Inspector\n                </p>\n                <p className=\"text-base font-bold text-slate-100 capitalize\">\n                  {selectedNode.type} Node\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"rounded-full p-2 text-slate-400 hover:bg-white/5 hover:text-white transition-colors\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Label Input */}\n            <div className=\"space-y-2\">\n              <label className=\"text-[10px] font-bold uppercase tracking-widest text-slate-500\">\n                Label\n              </label>\n              <input\n                className=\"w-full rounded-lg border border-white/10 bg-slate-900/50 px-3 py-2.5 text-sm text-slate-100 placeholder:text-slate-600 focus:border-sky-500/50 focus:outline-none focus:ring-1 focus:ring-sky-500/50 transition-all\"\n                value={selectedNode.data.label}\n                onChange={(event) =>\n                  onUpdate(selectedNode.id, { label: event.target.value })\n                }\n                placeholder=\"Node Label\"\n              />\n            </div>\n\n            {/* Subtitle Input */}\n            <div className=\"space-y-2\">\n              <label className=\"text-[10px] font-bold uppercase tracking-widest text-slate-500\">\n                Description\n              </label>\n              <textarea\n                className=\"w-full resize-none rounded-lg border border-white/10 bg-slate-900/50 px-3 py-2.5 text-sm text-slate-100 placeholder:text-slate-600 focus:border-sky-500/50 focus:outline-none focus:ring-1 focus:ring-sky-500/50 transition-all\"\n                rows={3}\n                value={selectedNode.data.subtitle || \"\"}\n                onChange={(event) =>\n                  onUpdate(selectedNode.id, { subtitle: event.target.value })\n                }\n                placeholder=\"Add a brief description...\"\n              />\n            </div>\n\n            {/* Read-only Metadata */}\n            <div className=\"rounded-lg bg-black/20 p-4 border border-white/5 space-y-2\">\n              <div className=\"flex justify-between text-xs\">\n                <span className=\"text-slate-500\">ID</span>\n                <span className=\"font-mono text-slate-300\">{selectedNode.id}</span>\n              </div>\n              <div className=\"flex justify-between text-xs\">\n                <span className=\"text-slate-500\">X, Y</span>\n                <span className=\"font-mono text-slate-300\">\n                  {Math.round(selectedNode.position.x)},{\" \"}\n                  {Math.round(selectedNode.position.y)}\n                </span>\n              </div>\n            </div>\n\n            {/* Node Params (non-capsule) */}\n            {selectedNode.type !== \"capsule\" && nodeParamDefs && (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-1 w-1 rounded-full bg-sky-400\" />\n                  <span className=\"text-[10px] font-bold uppercase tracking-widest text-sky-400\">\n                    Node Parameters\n                  </span>\n                </div>\n\n                <div className=\"rounded-lg border border-white/10 bg-slate-900/40 p-4 space-y-3\">\n                  {Object.entries(nodeParamDefs).map(([key, def]) => (\n                    <div key={key} className=\"space-y-1\">\n                      <label className=\"text-[10px] font-medium text-slate-400 uppercase\">\n                        {key.replace(/_/g, \" \")}\n                      </label>\n                      {renderParamControl(key, def)}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Capsule Node Params */}\n            {selectedNode.type === \"capsule\" && selectedNode.data.capsuleId && (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-1 w-1 rounded-full bg-rose-400\" />\n                  <span className=\"text-[10px] font-bold uppercase tracking-widest text-rose-400\">\n                    Capsule Parameters\n                  </span>\n                </div>\n\n                <div className=\"rounded-lg border border-rose-500/20 bg-rose-500/5 p-4 space-y-3\">\n                  <div className=\"flex items-start gap-2 rounded-md border border-white/5 bg-black/20 px-3 py-2 text-[11px] text-slate-300\">\n                    <Lock className=\"mt-0.5 h-3 w-3 text-rose-300\" />\n                    <div>\n                      <div className=\"text-slate-200\">Sealed capsule. Internal chain is hidden.</div>\n                      {selectedNode.data.locked && (\n                        <div className=\"text-slate-400\">Template locked. Only exposed params are editable.</div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between text-xs\">\n                    <span className=\"text-slate-400\">Capsule</span>\n                    <span className=\"font-mono text-rose-200\">\n                      {selectedNode.data.capsuleId}\n                    </span>\n                  </div>\n                  {selectedNode.data.capsuleVersion && (\n                    <div className=\"flex justify-between text-xs\">\n                      <span className=\"text-slate-400\">Version</span>\n                      <span className=\"font-mono text-rose-200\">\n                        {String(selectedNode.data.capsuleVersion)}\n                      </span>\n                    </div>\n                  )}\n\n                  {capsuleLoading && (\n                    <div className=\"text-xs text-slate-400\">Loading capsule spec...</div>\n                  )}\n                  {capsuleError && (\n                    <div className=\"text-xs text-rose-300\">{capsuleError}</div>\n                  )}\n\n                  {/* Editable Params */}\n                  {exposedParams && (\n                    <div className=\"space-y-3 pt-2 border-t border-white/5\">\n                      {Object.entries(exposedParams).map(([key, def]) => (\n                        <div key={key} className=\"space-y-1\">\n                          <label className=\"text-[10px] font-medium text-slate-400 uppercase\">\n                            {key.replace(/_/g, \" \")}\n                          </label>\n                          {renderParamControl(key, def)}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <button\n                    onClick={handleRunCapsule}\n                    disabled={runStatus === \"running\"}\n                    className=\"w-full rounded-lg border border-rose-500/30 bg-rose-500/10 px-3 py-2 text-xs font-semibold text-rose-100 hover:bg-rose-500/20 transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\n                  >\n                    {runStatus === \"running\" ? (\n                      <span className=\"h-4 w-4 animate-spin rounded-full border-2 border-rose-200 border-t-transparent\" />\n                    ) : (\n                      <Play className=\"h-4 w-4\" />\n                    )}\n                    {runStatus === \"running\" ? \"Running...\" : \"Run Capsule\"}\n                  </button>\n                  {runError && <div className=\"text-xs text-rose-300\">{runError}</div>}\n                  {runResult && (\n                    <div className=\"rounded-lg border border-emerald-500/20 bg-emerald-500/5 p-3 text-xs\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-semibold text-emerald-200\">Run Summary</span>\n                        <span className=\"text-slate-400 uppercase\">{runResult.status}</span>\n                      </div>\n                      {runResult.cached && (\n                        <div className=\"mt-1 text-[10px] text-emerald-300 uppercase\">Cached result</div>\n                      )}\n                      <div className=\"mt-2 text-slate-200\">\n                        {String(runResult.summary?.message ?? \"Capsule executed\")}\n                      </div>\n                      <div className=\"mt-2 text-[10px] text-slate-400\">\n                        Run ID: {runResult.run_id}\n                      </div>\n                      <div className=\"mt-2 space-y-1 text-[10px] text-slate-500\">\n                        <div>Evidence refs: {runResult.evidence_refs?.length ?? 0}</div>\n                        {(runResult.evidence_refs || []).map((ref) => (\n                          <div key={ref} className=\"rounded border border-white/5 bg-black/20 px-2 py-1 text-slate-300\">\n                            {ref}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between text-[10px] uppercase tracking-widest text-slate-400\">\n                    <span>Run History</span>\n                    {runHistoryLoading && <span className=\"text-slate-500\">Loading...</span>}\n                  </div>\n                  {runHistoryError && (\n                    <div className=\"text-xs text-rose-300\">{runHistoryError}</div>\n                  )}\n                  {runHistory.length === 0 && !runHistoryLoading && !runHistoryError && (\n                    <div className=\"text-xs text-slate-500\">No runs yet.</div>\n                  )}\n                  {runHistory.map((item) => (\n                    <div\n                      key={item.run_id}\n                      className=\"rounded-lg border border-white/5 bg-slate-900/50 px-3 py-2 text-xs\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-mono text-slate-300\">\n                          {item.run_id.slice(0, 8)}\n                        </span>\n                        <span className=\"text-[10px] uppercase text-slate-500\">\n                          {item.status}\n                        </span>\n                      </div>\n                      <div className=\"mt-1 text-slate-400\">\n                        {String(item.summary?.message ?? \"Capsule executed\")}\n                      </div>\n                      <div className=\"mt-1 text-[10px] text-slate-500\">\n                        {new Date(item.created_at).toLocaleString()}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Footer Actions */}\n          <div className=\"absolute bottom-6 left-6 right-6\">\n            {onDelete && (\n              <button\n                onClick={() => onDelete(selectedNode.id)}\n                className=\"group flex w-full items-center justify-center gap-2 rounded-lg border border-rose-500/20 bg-rose-500/10 px-4 py-3 text-sm font-semibold text-rose-200 hover:bg-rose-500/20 hover:border-rose-500/30 transition-all\"\n              >\n                <Trash2 className=\"h-4 w-4 opacity-70 group-hover:opacity-100\" />\n                Delete Node\n              </button>\n            )}\n          </div>\n        </motion.aside>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1483, "column": 0}, "map": {"version":3,"sources":["file:///Users/ted/vivid/frontend/src/components/canvas/PreviewPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { X, Palette, Layers, Clock, Eye, Sparkles, Link } from \"lucide-react\";\nimport type { StoryboardPreview, ScenePreview } from \"@/lib/api\";\n\ninterface PreviewPanelProps {\n    preview: StoryboardPreview | null;\n    isLoading: boolean;\n    onClose: () => void;\n}\n\nexport function PreviewPanel({ preview, isLoading, onClose }: PreviewPanelProps) {\n    if (!preview && !isLoading) return null;\n\n    return (\n        <AnimatePresence>\n            <motion.div\n                initial={{ opacity: 0, x: 300 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: 300 }}\n                transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\n                className=\"fixed right-0 top-0 h-full w-[400px] bg-gradient-to-b from-gray-900/95 to-gray-950/95 backdrop-blur-xl border-l border-white/10 z-50 overflow-hidden flex flex-col\"\n            >\n                {/* Header */}\n                <div className=\"flex items-center justify-between p-5 border-b border-white/10\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500/20 to-cyan-500/20 flex items-center justify-center\">\n                            <Eye className=\"w-5 h-5 text-violet-400\" />\n                        </div>\n                        <div>\n                            <h2 className=\"text-lg font-semibold text-white\">Storyboard Preview</h2>\n                            <p className=\"text-xs text-gray-400\">Generated style visualization</p>\n                        </div>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"p-2 rounded-lg hover:bg-white/10 transition-colors\"\n                    >\n                        <X className=\"w-5 h-5 text-gray-400\" />\n                    </button>\n                </div>\n\n                {/* Loading State */}\n                {isLoading && (\n                    <div className=\"flex-1 flex items-center justify-center\">\n                        <div className=\"text-center\">\n                            <motion.div\n                                animate={{ rotate: 360 }}\n                                transition={{ repeat: Infinity, duration: 2, ease: \"linear\" }}\n                            >\n                                <Sparkles className=\"w-12 h-12 text-violet-400 mx-auto mb-4\" />\n                            </motion.div>\n                            <p className=\"text-gray-400\">Generating preview...</p>\n                        </div>\n                    </div>\n                )}\n\n                {/* Content */}\n                {preview && !isLoading && (\n                    <div className=\"flex-1 overflow-y-auto p-5 space-y-6\">\n                        {/* Palette Section */}\n                        <section>\n                            <div className=\"flex items-center gap-2 mb-3\">\n                                <Palette className=\"w-4 h-4 text-violet-400\" />\n                                <h3 className=\"text-sm font-medium text-white\">Color Palette</h3>\n                            </div>\n                            <div className=\"flex gap-2\">\n                                {preview.palette.map((color, idx) => (\n                                    <motion.div\n                                        key={idx}\n                                        initial={{ scale: 0 }}\n                                        animate={{ scale: 1 }}\n                                        transition={{ delay: idx * 0.1 }}\n                                        className=\"group relative\"\n                                    >\n                                        <div\n                                            className=\"w-12 h-12 rounded-xl shadow-lg cursor-pointer transition-transform hover:scale-110\"\n                                            style={{ backgroundColor: color }}\n                                        />\n                                        <div className=\"absolute -bottom-6 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-800 rounded text-[10px] text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\n                                            {color}\n                                        </div>\n                                    </motion.div>\n                                ))}\n                            </div>\n                        </section>\n\n                        {/* Scenes Section */}\n                        <section>\n                            <div className=\"flex items-center gap-2 mb-3\">\n                                <Layers className=\"w-4 h-4 text-cyan-400\" />\n                                <h3 className=\"text-sm font-medium text-white\">Scene Breakdown</h3>\n                            </div>\n                            <div className=\"space-y-3\">\n                                {preview.scenes.map((scene, idx) => (\n                                    <SceneCard key={idx} scene={scene} index={idx} />\n                                ))}\n                            </div>\n                        </section>\n\n                        {/* Style Vector Visualization */}\n                        <section>\n                            <div className=\"flex items-center gap-2 mb-3\">\n                                <Sparkles className=\"w-4 h-4 text-amber-400\" />\n                                <h3 className=\"text-sm font-medium text-white\">Style Signature</h3>\n                            </div>\n                            <div className=\"bg-gray-800/50 rounded-xl p-4\">\n                                <div className=\"flex gap-1 h-16 items-end\">\n                                    {preview.style_vector.slice(0, 12).map((val, idx) => (\n                                        <motion.div\n                                            key={idx}\n                                            initial={{ height: 0 }}\n                                            animate={{ height: `${val * 100}%` }}\n                                            transition={{ delay: idx * 0.05, type: \"spring\" }}\n                                            className=\"flex-1 bg-gradient-to-t from-violet-600 to-violet-400 rounded-t\"\n                                        />\n                                    ))}\n                                </div>\n                                <div className=\"mt-2 text-xs text-gray-500 text-center\">\n                                    16-dimensional style embedding\n                                </div>\n                            </div>\n                        </section>\n\n                        {/* Evidence Section */}\n                        <section>\n                            <div className=\"flex items-center gap-2 mb-3\">\n                                <Link className=\"w-4 h-4 text-emerald-400\" />\n                                <h3 className=\"text-sm font-medium text-white\">Evidence Refs</h3>\n                            </div>\n                            {preview.evidence_refs.length === 0 ? (\n                                <div className=\"text-xs text-gray-500\">No evidence refs returned.</div>\n                            ) : (\n                                <div className=\"space-y-2\">\n                                    {preview.evidence_refs.map((ref, idx) => (\n                                        <div\n                                            key={idx}\n                                            className=\"rounded-lg border border-white/5 bg-gray-900/50 px-3 py-2 text-[11px] text-gray-300\"\n                                        >\n                                            {ref}\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n                        </section>\n                    </div>\n                )}\n\n                {/* Footer */}\n                {preview && (\n                    <div className=\"p-5 border-t border-white/10 bg-gray-900/50\">\n                        <div className=\"text-xs text-gray-500 text-center\">\n                            Run ID: {preview.run_id}  {preview.capsule_id}\n                        </div>\n                    </div>\n                )}\n            </motion.div>\n        </AnimatePresence>\n    );\n}\n\ninterface SceneCardProps {\n    scene: ScenePreview;\n    index: number;\n}\n\nfunction SceneCard({ scene, index }: SceneCardProps) {\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.1 }}\n            className=\"bg-gray-800/50 rounded-xl p-4 border border-white/5\"\n        >\n            <div className=\"flex items-start justify-between mb-3\">\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"w-6 h-6 rounded-full bg-gradient-to-br from-violet-600 to-cyan-600 flex items-center justify-center text-xs font-bold text-white\">\n                        {scene.scene_number}\n                    </span>\n                    <span className=\"text-sm font-medium text-white\">{scene.composition}</span>\n                </div>\n                <div className=\"flex items-center gap-1 text-xs text-gray-400\">\n                    <Clock className=\"w-3 h-3\" />\n                    {scene.duration_hint}\n                </div>\n            </div>\n\n            <div className=\"flex gap-2 mb-3\">\n                <div className=\"flex items-center gap-1\">\n                    <div\n                        className=\"w-4 h-4 rounded border border-white/20\"\n                        style={{ backgroundColor: scene.dominant_color }}\n                    />\n                    <span className=\"text-[10px] text-gray-500\">Primary</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                    <div\n                        className=\"w-4 h-4 rounded border border-white/20\"\n                        style={{ backgroundColor: scene.accent_color }}\n                    />\n                    <span className=\"text-[10px] text-gray-500\">Accent</span>\n                </div>\n            </div>\n\n            <div className=\"text-xs text-gray-400 bg-gray-900/50 rounded-lg px-3 py-2\">\n                {scene.pacing_note}\n            </div>\n        </motion.div>\n    );\n}\n\nexport default PreviewPanel;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2089, "column": 0}, "map": {"version":3,"sources":["file:///Users/ted/vivid/frontend/src/hooks/useUndoRedo.ts"],"sourcesContent":["import { useCallback, useState } from \"react\";\nimport { Edge, Node } from \"@xyflow/react\";\n\ninterface HistoryState {\n  nodes: Node[];\n  edges: Edge[];\n}\n\nexport function useUndoRedo() {\n  const [past, setPast] = useState<HistoryState[]>([]);\n  const [future, setFuture] = useState<HistoryState[]>([]);\n\n  const takeSnapshot = useCallback((nodes: Node[], edges: Edge[]) => {\n    setPast((old) => {\n      const newPast = [\n        ...old,\n        {\n          nodes: nodes.map((node) => ({ ...node })),\n          edges: edges.map((edge) => ({ ...edge })),\n        },\n      ];\n      if (newPast.length > 50) newPast.shift();\n      return newPast;\n    });\n    setFuture([]);\n  }, []);\n\n  const undo = useCallback(\n    (currentNodes: Node[], currentEdges: Edge[]) => {\n      if (past.length === 0) return null;\n\n      const newPast = [...past];\n      const previousState = newPast.pop();\n      if (!previousState) return null;\n\n      setPast(newPast);\n      setFuture((old) => [{ nodes: currentNodes, edges: currentEdges }, ...old]);\n      return previousState;\n    },\n    [past]\n  );\n\n  const redo = useCallback(\n    (currentNodes: Node[], currentEdges: Edge[]) => {\n      if (future.length === 0) return null;\n\n      const newFuture = [...future];\n      const nextState = newFuture.shift();\n      if (!nextState) return null;\n\n      setFuture(newFuture);\n      setPast((old) => [...old, { nodes: currentNodes, edges: currentEdges }]);\n      return nextState;\n    },\n    [future]\n  );\n\n  return {\n    takeSnapshot,\n    undo,\n    redo,\n    canUndo: past.length > 0,\n    canRedo: future.length > 0,\n    pastDepth: past.length,\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAQO,SAAS;;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAiB,EAAE;IACnD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAiB,EAAE;IAEvD,MAAM,eAAe,IAAA,4KAAW;iDAAC,CAAC,OAAe;YAC/C;yDAAQ,CAAC;oBACP,MAAM,UAAU;2BACX;wBACH;4BACE,OAAO,MAAM,GAAG;yEAAC,CAAC,OAAS,CAAC;wCAAE,GAAG,IAAI;oCAAC,CAAC;;4BACvC,OAAO,MAAM,GAAG;yEAAC,CAAC,OAAS,CAAC;wCAAE,GAAG,IAAI;oCAAC,CAAC;;wBACzC;qBACD;oBACD,IAAI,QAAQ,MAAM,GAAG,IAAI,QAAQ,KAAK;oBACtC,OAAO;gBACT;;YACA,UAAU,EAAE;QACd;gDAAG,EAAE;IAEL,MAAM,OAAO,IAAA,4KAAW;yCACtB,CAAC,cAAsB;YACrB,IAAI,KAAK,MAAM,KAAK,GAAG,OAAO;YAE9B,MAAM,UAAU;mBAAI;aAAK;YACzB,MAAM,gBAAgB,QAAQ,GAAG;YACjC,IAAI,CAAC,eAAe,OAAO;YAE3B,QAAQ;YACR;iDAAU,CAAC,MAAQ;wBAAC;4BAAE,OAAO;4BAAc,OAAO;wBAAa;2BAAM;qBAAI;;YACzE,OAAO;QACT;wCACA;QAAC;KAAK;IAGR,MAAM,OAAO,IAAA,4KAAW;yCACtB,CAAC,cAAsB;YACrB,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO;YAEhC,MAAM,YAAY;mBAAI;aAAO;YAC7B,MAAM,YAAY,UAAU,KAAK;YACjC,IAAI,CAAC,WAAW,OAAO;YAEvB,UAAU;YACV;iDAAQ,CAAC,MAAQ;2BAAI;wBAAK;4BAAE,OAAO;4BAAc,OAAO;wBAAa;qBAAE;;YACvE,OAAO;QACT;wCACA;QAAC;KAAO;IAGV,OAAO;QACL;QACA;QACA;QACA,SAAS,KAAK,MAAM,GAAG;QACvB,SAAS,OAAO,MAAM,GAAG;QACzB,WAAW,KAAK,MAAM;IACxB;AACF;GAzDgB"}},
    {"offset": {"line": 2189, "column": 0}, "map": {"version":3,"sources":["file:///Users/ted/vivid/frontend/src/app/canvas/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport {\n  ReactFlow,\n  addEdge,\n  Background,\n  Connection,\n  Controls,\n  Edge,\n  Node,\n  ReactFlowProvider,\n  useEdgesState,\n  useNodesState,\n  Panel,\n} from \"@xyflow/react\";\nimport \"@xyflow/react/dist/style.css\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Save,\n  FolderOpen,\n  Plus,\n  Undo,\n  Redo,\n  Share2,\n  MoreHorizontal,\n  MousePointer2,\n  Maximize2,\n  ZoomIn,\n  ZoomOut,\n  Play,\n  Sparkles,\n  Box,\n  X,\n} from \"lucide-react\";\n\nimport {\n  CanvasNode,\n  CanvasNodeData,\n  CanvasNodeKind,\n} from \"@/components/canvas/CustomNodes\";\nimport { Inspector } from \"@/components/canvas/Inspector\";\nimport { PreviewPanel } from \"@/components/canvas/PreviewPanel\";\nimport { api, Canvas, GenerationRun, StoryboardPreview } from \"@/lib/api\";\nimport { useUndoRedo } from \"@/hooks/useUndoRedo\";\n\n// @ts-ignore - nodeTypes typing is strict with generics\nconst nodeTypes = {\n  input: CanvasNode,\n  style: CanvasNode,\n  customization: CanvasNode,\n  processing: CanvasNode,\n  output: CanvasNode,\n  capsule: CanvasNode,\n};\n\nconst initialNodes: Node<CanvasNodeData>[] = [\n  {\n    id: \"input-1\",\n    type: \"input\",\n    position: { x: 100, y: 300 },\n    data: { label: \"Prompt Input\", subtitle: \"User request\" },\n  },\n  {\n    id: \"processing-1\",\n    type: \"processing\",\n    position: { x: 450, y: 300 },\n    data: { label: \"Reasoning Core\", subtitle: \"LLM + GA\" },\n  },\n  {\n    id: \"output-1\",\n    type: \"output\",\n    position: { x: 800, y: 300 },\n    data: { label: \"Final Response\", subtitle: \"Rendered Output\" },\n  },\n];\n\nconst initialEdges: Edge[] = [];\n\nconst createNodeId = () => {\n  if (typeof crypto !== \"undefined\" && \"randomUUID\" in crypto) {\n    return crypto.randomUUID();\n  }\n  return `node-${Date.now()}`;\n};\n\nfunction CanvasFlow() {\n  const searchParams = useSearchParams();\n  const urlCanvasId = searchParams.get(\"id\");\n\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const [selectedNode, setSelectedNode] = useState<Node<CanvasNodeData> | null>(\n    null\n  );\n\n  const [canvasId, setCanvasId] = useState<string | null>(null);\n  const [title, setTitle] = useState(\"Untitled Project\");\n  const [isPublic, setIsPublic] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [canvases, setCanvases] = useState<Canvas[]>([]);\n  const [showLoadModal, setShowLoadModal] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isOptimizing, setIsOptimizing] = useState(false);\n  const [recommendations, setRecommendations] = useState<\n    Array<{\n      params: Record<string, unknown>;\n      fitness_score: number;\n      profile: string;\n    }>\n  >([]);\n  const [showRecommendations, setShowRecommendations] = useState(false);\n  const [storyboardPreview, setStoryboardPreview] = useState<StoryboardPreview | null>(null);\n  const [isPreviewLoading, setIsPreviewLoading] = useState(false);\n  const [showPreviewPanel, setShowPreviewPanel] = useState(false);\n  const [generationRun, setGenerationRun] = useState<GenerationRun | null>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationStatus, setGenerationStatus] = useState<string | null>(null);\n  const generationPollRef = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  const { takeSnapshot, undo, redo, canUndo, canRedo } = useUndoRedo();\n\n  useEffect(() => {\n    return () => {\n      if (generationPollRef.current) {\n        clearInterval(generationPollRef.current);\n      }\n    };\n  }, []);\n\n  const stopGenerationPolling = useCallback(() => {\n    if (generationPollRef.current) {\n      clearInterval(generationPollRef.current);\n      generationPollRef.current = null;\n    }\n  }, []);\n\n  const startGenerationPolling = useCallback((runId: string) => {\n    if (generationPollRef.current) {\n      clearInterval(generationPollRef.current);\n    }\n    generationPollRef.current = setInterval(async () => {\n      try {\n        const run = await api.getGenerationRun(runId);\n        setGenerationRun(run);\n        setGenerationStatus(run.status);\n        if (run.status === \"done\" || run.status === \"failed\") {\n          stopGenerationPolling();\n          setIsGenerating(false);\n        }\n      } catch (err) {\n        setError(err instanceof Error ? err.message : \"Failed to fetch run status\");\n        stopGenerationPolling();\n        setIsGenerating(false);\n      }\n    }, 1500);\n  }, [stopGenerationPolling]);\n\n  const handleRun = useCallback(async () => {\n    setIsOptimizing(true);\n    setError(null);\n    try {\n      const processingNode = nodes.find((node) => node.type === \"processing\");\n      const targetProfile =\n        typeof processingNode?.data?.params?.target_profile === \"string\"\n          ? (processingNode.data.params.target_profile as string)\n          : \"balanced\";\n      const result = await api.optimizeParams(nodes, edges, targetProfile);\n      setRecommendations(result.recommendations);\n      setShowRecommendations(true);\n\n      // Also run capsule and get preview for any capsule nodes\n      const capsuleNode = nodes.find((n) => n.type === \"capsule\");\n      if (capsuleNode && capsuleNode.data.capsuleId) {\n        setIsPreviewLoading(true);\n        setShowPreviewPanel(true);\n        try {\n          const runResult = await api.runCapsule({\n            canvas_id: canvasId || undefined,\n            node_id: capsuleNode.id,\n            capsule_id: capsuleNode.data.capsuleId,\n            capsule_version: capsuleNode.data.capsuleVersion || \"latest\",\n            inputs: {},\n            params: capsuleNode.data.params || {},\n          });\n          if (runResult.version && capsuleNode.data.capsuleVersion !== runResult.version) {\n            setNodes((current) =>\n              current.map((node) =>\n                node.id === capsuleNode.id\n                  ? {\n                      ...node,\n                      data: {\n                        ...node.data,\n                        capsuleVersion: runResult.version,\n                      },\n                    }\n                  : node\n              )\n            );\n          }\n          const preview = await api.getStoryboardPreview(\n            capsuleNode.data.capsuleId,\n            runResult.run_id,\n            3\n          );\n          setStoryboardPreview(preview);\n        } catch (previewErr) {\n          console.error(\"Preview error:\", previewErr);\n        } finally {\n          setIsPreviewLoading(false);\n        }\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Optimization failed\");\n    } finally {\n      setIsOptimizing(false);\n    }\n  }, [nodes, edges, canvasId]);\n\n  const handleGenerate = useCallback(async () => {\n    if (!canvasId) {\n      setError(\"Save the canvas before generating.\");\n      return;\n    }\n    setIsGenerating(true);\n    setError(null);\n    try {\n      const run = await api.createGenerationRun(canvasId);\n      setGenerationRun(run);\n      setGenerationStatus(run.status);\n      startGenerationPolling(run.id);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Generation failed to start\");\n      setIsGenerating(false);\n    }\n  }, [canvasId, startGenerationPolling]);\n\n  const applyRecommendation = useCallback(\n    (params: Record<string, unknown>) => {\n      // Find capsule nodes and update their params\n      const nextNodes = nodes.map((node) => {\n        if (node.type === \"capsule\") {\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              params: { ...node.data.params, ...params },\n            },\n          };\n        }\n        return node;\n      });\n      setNodes(nextNodes);\n      takeSnapshot(nextNodes, edges);\n      setShowRecommendations(false);\n    },\n    [nodes, edges, setNodes, takeSnapshot]\n  );\n\n  // Load canvas from URL param (from template flow)\n  useEffect(() => {\n    if (urlCanvasId && !canvasId) {\n      setIsLoading(true);\n      api.loadCanvas(urlCanvasId)\n        .then((loaded) => {\n          setCanvasId(loaded.id);\n          setTitle(loaded.title);\n          setIsPublic(loaded.is_public);\n          setNodes(loaded.graph_data.nodes as Node<CanvasNodeData>[]);\n          setEdges(loaded.graph_data.edges);\n          takeSnapshot(loaded.graph_data.nodes, loaded.graph_data.edges);\n        })\n        .catch((err) => {\n          setError(err instanceof Error ? err.message : \"Failed to load canvas\");\n        })\n        .finally(() => setIsLoading(false));\n    }\n  }, [urlCanvasId, canvasId, setNodes, setEdges, takeSnapshot]);\n\n  // Initial snapshot (only if not loading from URL)\n  useEffect(() => {\n    if (!urlCanvasId) {\n      takeSnapshot(initialNodes, initialEdges);\n    }\n  }, [takeSnapshot, urlCanvasId]);\n\n  const onConnect = useCallback(\n    (connection: Connection) => {\n      setEdges((eds) => {\n        const nextEdges = addEdge(\n          {\n            ...connection,\n            animated: true,\n            style: { stroke: \"#38bdf8\", strokeWidth: 2.5 },\n          },\n          eds\n        );\n        takeSnapshot(nodes, nextEdges);\n        return nextEdges;\n      });\n    },\n    [nodes, setEdges, takeSnapshot]\n  );\n\n  const handleAddNode = useCallback(\n    (kind: CanvasNodeKind) => {\n      const newNode: Node<CanvasNodeData> = {\n        id: createNodeId(),\n        type: kind,\n        position: {\n          x: 400 + Math.random() * 100,\n          y: 300 + Math.random() * 100,\n        },\n        data: {\n          label: `New ${kind}`,\n          subtitle: \"Configure in inspector\",\n        },\n      };\n      const nextNodes = [...nodes, newNode];\n      setNodes(nextNodes);\n      takeSnapshot(nextNodes, edges);\n    },\n    [edges, nodes, setNodes, takeSnapshot]\n  );\n\n  const handleUndo = useCallback(() => {\n    const previous = undo(nodes, edges);\n    if (previous) {\n      setNodes(previous.nodes as Node<CanvasNodeData>[]);\n      setEdges(previous.edges);\n    }\n  }, [undo, nodes, edges, setNodes, setEdges]);\n\n  const handleRedo = useCallback(() => {\n    const next = redo(nodes, edges);\n    if (next) {\n      setNodes(next.nodes as Node<CanvasNodeData>[]);\n      setEdges(next.edges);\n    }\n  }, [redo, nodes, edges, setNodes, setEdges]);\n\n  const handleUpdateNode = useCallback(\n    (nodeId: string, data: Partial<CanvasNodeData>) => {\n      const nextNodes = nodes.map((node) =>\n        node.id === nodeId\n          ? { ...node, data: { ...node.data, ...data } }\n          : node\n      );\n      setNodes(nextNodes);\n      setSelectedNode((current) =>\n        current && current.id === nodeId\n          ? ({ ...current, data: { ...current.data, ...data } } as Node<CanvasNodeData>)\n          : current\n      );\n    },\n    [nodes, setNodes]\n  );\n\n  const handleDeleteNode = useCallback(\n    (nodeId: string) => {\n      const nextNodes = nodes.filter((node) => node.id !== nodeId);\n      const nextEdges = edges.filter(\n        (edge) => edge.source !== nodeId && edge.target !== nodeId\n      );\n      setNodes(nextNodes);\n      setEdges(nextEdges);\n      setSelectedNode(null);\n      takeSnapshot(nextNodes, nextEdges);\n    },\n    [edges, nodes, setEdges, setNodes, takeSnapshot]\n  );\n\n  const handleSave = useCallback(async () => {\n    setIsSaving(true);\n    setError(null);\n    try {\n      const payload = {\n        title,\n        graph_data: { nodes, edges },\n        is_public: isPublic,\n      };\n      const saved = canvasId\n        ? await api.updateCanvas(canvasId, payload)\n        : await api.createCanvas(payload);\n      setCanvasId(saved.id);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Save failed\");\n    } finally {\n      setIsSaving(false);\n    }\n  }, [canvasId, edges, isPublic, nodes, title]);\n\n  const handleOpenLoad = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const list = await api.listCanvases();\n      setCanvases(list);\n      setShowLoadModal(true);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Load failed\");\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  const handleLoadCanvas = useCallback(\n    async (canvas: Canvas) => {\n      setIsLoading(true);\n      setError(null);\n      try {\n        const loaded = await api.loadCanvas(canvas.id);\n        setCanvasId(loaded.id);\n        setTitle(loaded.title);\n        setIsPublic(loaded.is_public);\n        setNodes(loaded.graph_data.nodes as Node<CanvasNodeData>[]);\n        setEdges(loaded.graph_data.edges);\n        stopGenerationPolling();\n        setGenerationRun(null);\n        setGenerationStatus(null);\n        setIsGenerating(false);\n        setShowLoadModal(false);\n        takeSnapshot(loaded.graph_data.nodes, loaded.graph_data.edges);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : \"Load failed\");\n      } finally {\n        setIsLoading(false);\n      }\n    },\n    [setEdges, setNodes, takeSnapshot]\n  );\n\n  const handleNewCanvas = useCallback(() => {\n    setCanvasId(null);\n    setTitle(\"New Project\");\n    setIsPublic(false);\n    setNodes(initialNodes);\n    setEdges(initialEdges);\n    setSelectedNode(null);\n    stopGenerationPolling();\n    setGenerationRun(null);\n    setGenerationStatus(null);\n    setIsGenerating(false);\n    takeSnapshot(initialNodes, initialEdges);\n  }, [setEdges, setNodes, takeSnapshot]);\n\n  const toolbarButtons = useMemo(\n    () =>\n      [\n        { kind: \"input\", label: \"Input\" },\n        { kind: \"style\", label: \"Style\" },\n        { kind: \"customization\", label: \"Custom\" },\n        { kind: \"processing\", label: \"Logic\" },\n        { kind: \"output\", label: \"Output\" },\n      ] as const,\n    []\n  );\n\n  return (\n    <div className=\"h-screen w-screen bg-slate-950 text-slate-100 overflow-hidden relative\">\n      {/* --- HEADER --- */}\n      <header className=\"absolute top-0 left-0 right-0 z-10 px-6 py-4 flex items-center justify-between pointer-events-none\">\n        <div className=\"pointer-events-auto flex items-center gap-4 bg-slate-950/50 backdrop-blur-md p-2 rounded-2xl border border-white/10 shadow-xl\">\n          <div className=\"flex flex-col px-2\">\n            <span className=\"text-[10px] uppercase tracking-widest text-sky-400 font-bold\">\n              Vivid\n            </span>\n            <input\n              className=\"bg-transparent text-sm font-bold text-slate-100 focus:outline-none w-40\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Project Name\"\n            />\n          </div>\n          <div className=\"h-6 w-px bg-white/10\" />\n          <div className=\"flex gap-1\">\n            <button\n              onClick={handleSave}\n              disabled={isSaving}\n              className=\"group p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\n              title=\"Save Project\"\n            >\n              <Save\n                className={`h-4 w-4 ${isSaving ? \"animate-spin\" : \"\"}`}\n              />\n            </button>\n            <button\n              onClick={handleOpenLoad}\n              disabled={isLoading}\n              className=\"p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\n              title=\"Load Project\"\n            >\n              <FolderOpen className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={handleNewCanvas}\n              className=\"p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white transition-colors\"\n              title=\"New Project\"\n            >\n              <Plus className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"pointer-events-auto flex gap-2\">\n          {/* Center or Right aligned controls can go here */}\n          <div className=\"bg-slate-950/50 backdrop-blur-md p-2 rounded-2xl border border-white/10 shadow-xl flex gap-1\">\n            <button\n              onClick={handleUndo}\n              disabled={!canUndo}\n              className=\"p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white disabled:opacity-30\"\n            >\n              <Undo className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={handleRedo}\n              disabled={!canRedo}\n              className=\"p-2 rounded-lg hover:bg-white/10 text-slate-400 hover:text-white disabled:opacity-30\"\n            >\n              <Redo className=\"h-4 w-4\" />\n            </button>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={handleGenerate}\n              disabled={isGenerating}\n              className=\"bg-emerald-500 hover:bg-emerald-400 text-white px-4 py-2 rounded-xl text-sm font-semibold shadow-lg shadow-emerald-500/20 transition-all flex items-center gap-2 disabled:opacity-50\"\n            >\n              {isGenerating ? (\n                <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n              ) : (\n                <Sparkles className=\"h-4 w-4\" />\n              )}\n              {isGenerating ? \"Generating...\" : \"Generate\"}\n            </button>\n            {generationStatus && (\n              <span className=\"text-[10px] uppercase tracking-widest text-emerald-200/80\">\n                {generationStatus}\n              </span>\n            )}\n          </div>\n\n          <button\n            onClick={handleRun}\n            disabled={isOptimizing}\n            className=\"bg-sky-500 hover:bg-sky-400 text-white px-4 py-2 rounded-xl text-sm font-semibold shadow-lg shadow-sky-500/20 transition-all flex items-center gap-2 disabled:opacity-50\"\n          >\n            {isOptimizing ? (\n              <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n            ) : (\n              <Play className=\"h-4 w-4 fill-current\" />\n            )}\n            {isOptimizing ? \"Optimizing...\" : \"Run\"}\n          </button>\n        </div>\n      </header>\n\n      {/* Error Toast */}\n      <AnimatePresence>\n        {error && (\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"absolute top-20 left-1/2 -translate-x-1/2 z-50 bg-rose-500/90 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium backdrop-blur\"\n          >\n            {error}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* --- CANVAS --- */}\n      <div className=\"absolute inset-0 z-0\">\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          onNodeClick={(_, node) =>\n            setSelectedNode(node as Node<CanvasNodeData>)\n          }\n          fitView\n          nodeTypes={nodeTypes as any}\n          proOptions={{ hideAttribution: true }}\n          minZoom={0.2}\n          maxZoom={2}\n          onPaneClick={() => setSelectedNode(null)}\n        >\n          <Background color=\"#334155\" gap={40} size={1} />\n          {/* Custom Controls Positioned Bottom Right */}\n          <Panel position=\"bottom-right\" className=\"mb-8 mr-8 flex flex-col gap-2\">\n            <button className=\"bg-slate-900/80 p-2 rounded-lg border border-white/10 text-slate-400 hover:text-white hover:bg-white/10\" title=\"Zoom In\">\n              <ZoomIn className=\"h-5 w-5\" />\n            </button>\n            <button className=\"bg-slate-900/80 p-2 rounded-lg border border-white/10 text-slate-400 hover:text-white hover:bg-white/10\" title=\"Zoom Out\">\n              <ZoomOut className=\"h-5 w-5\" />\n            </button>\n            <button className=\"bg-slate-900/80 p-2 rounded-lg border border-white/10 text-slate-400 hover:text-white hover:bg-white/10\" title=\"Fit View\">\n              <Maximize2 className=\"h-5 w-5\" />\n            </button>\n          </Panel>\n        </ReactFlow>\n      </div>\n\n      {/* --- FLOATING DOCK TOOLBAR --- */}\n      <div className=\"absolute bottom-8 left-1/2 -translate-x-1/2 z-10\">\n        <motion.div\n          initial={{ y: 100, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          className=\"flex items-center gap-2 p-2 bg-slate-950/60 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-2xl\"\n        >\n          {toolbarButtons.map((btn) => (\n            <button\n              key={btn.kind}\n              onClick={() => handleAddNode(btn.kind)}\n              className=\"group relative flex flex-col items-center justify-center w-16 h-16 rounded-xl border border-transparent hover:border-white/10 hover:bg-white/5 transition-all\"\n            >\n              <div className=\"h-8 w-8 rounded bg-slate-800 group-hover:bg-sky-500/20 group-hover:text-sky-400 flex items-center justify-center transition-colors text-slate-400 mb-1\">\n                <Box className=\"h-5 w-5\" />\n              </div>\n              <span className=\"text-[10px] font-medium text-slate-400 group-hover:text-slate-100\">\n                {btn.label}\n              </span>\n\n              {/* Tooltip hint could go here */}\n            </button>\n          ))}\n        </motion.div>\n      </div>\n\n      {/* --- INSPECTOR PANEL --- */}\n      <Inspector\n        selectedNode={selectedNode}\n        onClose={() => setSelectedNode(null)}\n        onUpdate={handleUpdateNode}\n        onDelete={handleDeleteNode}\n      />\n\n      {/* --- PREVIEW PANEL --- */}\n      {showPreviewPanel && (\n        <PreviewPanel\n          preview={storyboardPreview}\n          isLoading={isPreviewLoading}\n          onClose={() => {\n            setShowPreviewPanel(false);\n            setStoryboardPreview(null);\n          }}\n        />\n      )}\n\n      {/* --- LOAD MODAL --- */}\n      <AnimatePresence>\n        {showLoadModal && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n            onClick={() => setShowLoadModal(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              className=\"w-full max-w-lg rounded-2xl border border-white/10 bg-slate-950 shadow-2xl overflow-hidden\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between p-6 border-b border-white/5\">\n                <h2 className=\"text-lg font-semibold text-white\">Open Project</h2>\n                <button onClick={() => setShowLoadModal(false)} className=\"text-slate-400 hover:text-white\">\n                  <Maximize2 className=\"h-4 w-4 rotate-45\" /> {/* Close Icon */}\n                </button>\n              </div>\n              <div className=\"p-2 max-h-96 overflow-y-auto\">\n                {canvases.length === 0 ? (\n                  <div className=\"p-8 text-center text-slate-500\">\n                    No saved projects found.\n                  </div>\n                ) : (\n                  <div className=\"grid gap-1\">\n                    {canvases.map((canvas) => (\n                      <button\n                        key={canvas.id}\n                        onClick={() => handleLoadCanvas(canvas)}\n                        className=\"flex items-center justify-between w-full p-4 rounded-xl hover:bg-white/5 text-left border border-transparent hover:border-white/5 transition-all group\"\n                      >\n                        <div>\n                          <div className=\"font-semibold text-slate-200 group-hover:text-sky-400 transition-colors\">{canvas.title}</div>\n                          <div className=\"text-xs text-slate-500 mt-1\">Updated {new Date(canvas.updated_at).toLocaleDateString()}</div>\n                        </div>\n                        <div className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <FolderOpen className=\"h-4 w-4 text-slate-400\" />\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Recommendations Modal */}\n      <AnimatePresence>\n        {showRecommendations && recommendations.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\"\n          >\n            <motion.div\n              initial={{ scale: 0.95, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.95, opacity: 0 }}\n              className=\"w-full max-w-lg rounded-2xl border border-white/10 bg-slate-950/95 p-6 shadow-2xl backdrop-blur-xl\"\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <div>\n                  <h2 className=\"text-lg font-bold text-slate-100\">GA Recommendations</h2>\n                  <p className=\"text-sm text-slate-400\">Top 3 optimized parameter sets</p>\n                </div>\n                <button\n                  onClick={() => setShowRecommendations(false)}\n                  className=\"p-2 rounded-lg hover:bg-white/5 text-slate-400 hover:text-white\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-3\">\n                {recommendations.map((rec, idx) => (\n                  <div\n                    key={idx}\n                    className=\"rounded-xl border border-white/10 bg-slate-900/50 p-4 hover:border-sky-500/30 transition-colors\"\n                  >\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-xs font-bold text-sky-400 uppercase\">\n                        Recommendation {idx + 1}\n                      </span>\n                      <span className=\"text-xs font-mono text-slate-500\">\n                        Score: {rec.fitness_score.toFixed(1)}\n                      </span>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-2 text-xs mb-3\">\n                      {Object.entries(rec.params).slice(0, 4).map(([key, value]) => (\n                        <div key={key} className=\"flex justify-between\">\n                          <span className=\"text-slate-500\">{key.replace(/_/g, \" \")}</span>\n                          <span className=\"font-mono text-slate-300\">\n                            {typeof value === \"number\" ? value.toFixed(2) : String(value)}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                    <button\n                      onClick={() => applyRecommendation(rec.params)}\n                      className=\"w-full py-2 rounded-lg bg-sky-500/10 text-sky-400 text-xs font-semibold hover:bg-sky-500/20 transition-colors\"\n                    >\n                      Apply This Set\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nimport { Suspense } from \"react\";\n\nfunction CanvasPageContent() {\n  return (\n    <ReactFlowProvider>\n      <CanvasFlow />\n    </ReactFlowProvider>\n  );\n}\n\nexport default function CanvasPage() {\n  return (\n    <Suspense fallback={<div className=\"h-screen w-screen flex items-center justify-center bg-slate-950 text-slate-400\">Loading canvas...</div>}>\n      <CanvasPageContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}